# maven依赖关系

# 传递依赖原则

举个例子，比如A依赖B，B依赖C，那么A也是依赖C的。A是对B的直接依赖，A对C是传递依赖

# 最短路径原则

- 路径一：A依赖B，B依赖C，C依赖D（1.0.0）；
- 路径二：A依赖E，E依赖D（2.0.0），
- 此时A间接依赖D版本是2.0.0！

# 最先定义原则

- 路径一：A依赖B，B依赖C（1.0.0）；
- 路径二：A依赖E，E依赖C（2.0.0），
- 因为路径一在前，此时A间接依赖C版本是1.0.0！

# 依赖排除

如果想精确的控制依赖包版本，可以使用依赖的排除功能exclusions来排除

# 依赖传递的作用域

依赖的范围：

- test范围指的是测试范围有效，在编译和打包时都不会使用这个依赖
- compile范围指的是编译范围有效，在编译和打包时都会将依赖存储进去
- provided范围指的是在编译和测试的过程有效，最后生成war包时不会加入，诸如：servlet-api,因为servlet-api,tomcat等web服务器已经存在了，如果再打包会冲突
- runtime在运行的时候依赖，在编译的时候不依赖

> 在dependency配置中如果没有写scope默认就是compile范围，依赖的传递主要是针对compile作用域



### optional

optional 表示可选依赖，它的值有两种

- true：可选依赖
- false：默认值，非可选依赖

在Maven中可选依赖是不会进行传递的

**什么是可选依赖？** 假如A依赖B，B中有可选依赖C，那么除非A显示声明，否则可选依赖包是不会导入进依赖的。

**为什么要有可选选依赖？**

比如，一个持久层模块不但可以持久化Oracle数据库，也可以持久化Mysql数据库，那么在这个持化层框架中应该对应了两份代码，一份是关于Oracle持久化的处理，一份是关于Mysql持久化的处理，如果将持久层模块的Oracle与Mysql驱动均设置为非可选依赖，那么依赖这个持久层框架的项目类路径中将同时出现Mysql以及Oracle的驱动Jar包，因此Maven通过Optional关键字来处理这种问题

